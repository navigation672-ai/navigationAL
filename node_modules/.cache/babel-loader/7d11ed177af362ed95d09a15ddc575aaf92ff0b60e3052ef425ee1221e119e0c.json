{"ast":null,"code":"import React,{useState}from'react';import{EAST_LAND_DISPLAY,MAIN_LAND_DISPLAY,generateToken,generateMapplsURL}from'../utils';import'./DepartmentList.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DepartmentList=_ref=>{let{zone,onBack}=_ref;const[searchTerm,setSearchTerm]=useState('');const departments=zone==='east'?EAST_LAND_DISPLAY:MAIN_LAND_DISPLAY;const zoneTitle=zone==='east'?'East Land Departments':'Main Land Departments';const zoneSubtitle=\"Select a department in \".concat(zone==='east'?'East':'Main',\" Land to start navigation.\");const filteredDepts=Object.entries(departments).filter(_ref2=>{let[code,name]=_ref2;return name.toLowerCase().includes(searchTerm.toLowerCase());});const handleNavigation=deptCode=>{const token=generateToken(deptCode);const mapplsURL=generateMapplsURL(deptCode,token);// Store token in localStorage with expiry\nlocalStorage.setItem(\"token_\".concat(deptCode),JSON.stringify({token:token,expiry:Date.now()+30*60*1000}));// Open navigation in new tab\nwindow.open(mapplsURL,'_blank');};return/*#__PURE__*/_jsxs(\"section\",{id:\"zone-view\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"zone-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:onBack,children:\"\\u2190\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"zone-title-block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"zone-title\",children:zoneTitle}),/*#__PURE__*/_jsx(\"div\",{className:\"zone-subtitle\",children:zoneSubtitle})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-box\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"search\",className:\"search-input\",type:\"text\",placeholder:\"Search department in this zone\\u2026\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{className:\"search-icon\",children:\"\\uD83D\\uDD0D\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"layout-grid\",children:/*#__PURE__*/_jsx(\"section\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dept-list\",children:filteredDepts.map(_ref3=>{let[code,name]=_ref3;return/*#__PURE__*/_jsx(\"div\",{className:\"dept-row\",children:/*#__PURE__*/_jsx(\"button\",{className:\"dept-link\",onClick:()=>handleNavigation(code),children:name})},code);})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-actions\",children:/*#__PURE__*/_jsx(\"p\",{className:\"note-text\",children:\"Note: Navigation links are valid for 30 minutes from generation.\"})})]});};export default DepartmentList;","map":{"version":3,"names":["React","useState","EAST_LAND_DISPLAY","MAIN_LAND_DISPLAY","generateToken","generateMapplsURL","jsx","_jsx","jsxs","_jsxs","DepartmentList","_ref","zone","onBack","searchTerm","setSearchTerm","departments","zoneTitle","zoneSubtitle","concat","filteredDepts","Object","entries","filter","_ref2","code","name","toLowerCase","includes","handleNavigation","deptCode","token","mapplsURL","localStorage","setItem","JSON","stringify","expiry","Date","now","window","open","id","children","className","onClick","type","placeholder","value","onChange","e","target","map","_ref3"],"sources":["D:/navigationAl-main/src/components/DepartmentList.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { \n    EAST_LAND_DISPLAY, \n    MAIN_LAND_DISPLAY, \n    generateToken,\n    generateMapplsURL \n} from '../utils';\nimport './DepartmentList.css';\n\nconst DepartmentList = ({ zone, onBack }) => {\n    const [searchTerm, setSearchTerm] = useState('');\n    \n    const departments = zone === 'east' ? EAST_LAND_DISPLAY : MAIN_LAND_DISPLAY;\n    const zoneTitle = zone === 'east' ? 'East Land Departments' : 'Main Land Departments';\n    const zoneSubtitle = `Select a department in ${zone === 'east' ? 'East' : 'Main'} Land to start navigation.`;\n    \n    const filteredDepts = Object.entries(departments).filter(([code, name]) =>\n        name.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    const handleNavigation = (deptCode) => {\n        const token = generateToken(deptCode);\n        const mapplsURL = generateMapplsURL(deptCode, token);\n        \n        // Store token in localStorage with expiry\n        localStorage.setItem(`token_${deptCode}`, JSON.stringify({\n            token: token,\n            expiry: Date.now() + (30 * 60 * 1000)\n        }));\n        \n        // Open navigation in new tab\n        window.open(mapplsURL, '_blank');\n    };\n\n    return (\n        <section id=\"zone-view\">\n            <div className=\"zone-header\">\n                <button className=\"back-btn\" onClick={onBack}>&#8592;</button>\n                <div className=\"zone-title-block\">\n                    <div className=\"zone-title\">{zoneTitle}</div>\n                    <div className=\"zone-subtitle\">{zoneSubtitle}</div>\n                </div>\n            </div>\n\n            <div className=\"search-box\">\n                <input\n                    id=\"search\"\n                    className=\"search-input\"\n                    type=\"text\"\n                    placeholder=\"Search department in this zoneâ€¦\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                />\n                <span className=\"search-icon\">&#128269;</span>\n            </div>\n\n            <div className=\"layout-grid\">\n                <section className=\"card\">\n                    <div className=\"dept-list\">\n                        {filteredDepts.map(([code, name]) => (\n                            <div className=\"dept-row\" key={code}>\n                                <button \n                                    className=\"dept-link\"\n                                    onClick={() => handleNavigation(code)}\n                                >\n                                    {name}\n                                </button>\n                            </div>\n                        ))}\n                    </div>\n                </section>\n            </div>\n\n            <div className=\"footer-actions\">\n                <p className=\"note-text\">\n                    Note: Navigation links are valid for 30 minutes from generation.\n                </p>\n            </div>\n        </section>\n    );\n};\n\nexport default DepartmentList;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OACIC,iBAAiB,CACjBC,iBAAiB,CACjBC,aAAa,CACbC,iBAAiB,KACd,UAAU,CACjB,MAAO,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9B,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAsB,IAArB,CAAEC,IAAI,CAAEC,MAAO,CAAC,CAAAF,IAAA,CACpC,KAAM,CAACG,UAAU,CAAEC,aAAa,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAEhD,KAAM,CAAAe,WAAW,CAAGJ,IAAI,GAAK,MAAM,CAAGV,iBAAiB,CAAGC,iBAAiB,CAC3E,KAAM,CAAAc,SAAS,CAAGL,IAAI,GAAK,MAAM,CAAG,uBAAuB,CAAG,uBAAuB,CACrF,KAAM,CAAAM,YAAY,2BAAAC,MAAA,CAA6BP,IAAI,GAAK,MAAM,CAAG,MAAM,CAAG,MAAM,8BAA4B,CAE5G,KAAM,CAAAQ,aAAa,CAAGC,MAAM,CAACC,OAAO,CAACN,WAAW,CAAC,CAACO,MAAM,CAACC,KAAA,MAAC,CAACC,IAAI,CAAEC,IAAI,CAAC,CAAAF,KAAA,OAClE,CAAAE,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACd,UAAU,CAACa,WAAW,CAAC,CAAC,CAAC,EACzD,CAAC,CAED,KAAM,CAAAE,gBAAgB,CAAIC,QAAQ,EAAK,CACnC,KAAM,CAAAC,KAAK,CAAG3B,aAAa,CAAC0B,QAAQ,CAAC,CACrC,KAAM,CAAAE,SAAS,CAAG3B,iBAAiB,CAACyB,QAAQ,CAAEC,KAAK,CAAC,CAEpD;AACAE,YAAY,CAACC,OAAO,UAAAf,MAAA,CAAUW,QAAQ,EAAIK,IAAI,CAACC,SAAS,CAAC,CACrDL,KAAK,CAAEA,KAAK,CACZM,MAAM,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAI,EAAE,CAAG,EAAE,CAAG,IACpC,CAAC,CAAC,CAAC,CAEH;AACAC,MAAM,CAACC,IAAI,CAACT,SAAS,CAAE,QAAQ,CAAC,CACpC,CAAC,CAED,mBACIvB,KAAA,YAASiC,EAAE,CAAC,WAAW,CAAAC,QAAA,eACnBlC,KAAA,QAAKmC,SAAS,CAAC,aAAa,CAAAD,QAAA,eACxBpC,IAAA,WAAQqC,SAAS,CAAC,UAAU,CAACC,OAAO,CAAEhC,MAAO,CAAA8B,QAAA,CAAC,QAAO,CAAQ,CAAC,cAC9DlC,KAAA,QAAKmC,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eAC7BpC,IAAA,QAAKqC,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAE1B,SAAS,CAAM,CAAC,cAC7CV,IAAA,QAAKqC,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAEzB,YAAY,CAAM,CAAC,EAClD,CAAC,EACL,CAAC,cAENT,KAAA,QAAKmC,SAAS,CAAC,YAAY,CAAAD,QAAA,eACvBpC,IAAA,UACImC,EAAE,CAAC,QAAQ,CACXE,SAAS,CAAC,cAAc,CACxBE,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,sCAAiC,CAC7CC,KAAK,CAAElC,UAAW,CAClBmC,QAAQ,CAAGC,CAAC,EAAKnC,aAAa,CAACmC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAClD,CAAC,cACFzC,IAAA,SAAMqC,SAAS,CAAC,aAAa,CAAAD,QAAA,CAAC,cAAS,CAAM,CAAC,EAC7C,CAAC,cAENpC,IAAA,QAAKqC,SAAS,CAAC,aAAa,CAAAD,QAAA,cACxBpC,IAAA,YAASqC,SAAS,CAAC,MAAM,CAAAD,QAAA,cACrBpC,IAAA,QAAKqC,SAAS,CAAC,WAAW,CAAAD,QAAA,CACrBvB,aAAa,CAACgC,GAAG,CAACC,KAAA,MAAC,CAAC5B,IAAI,CAAEC,IAAI,CAAC,CAAA2B,KAAA,oBAC5B9C,IAAA,QAAKqC,SAAS,CAAC,UAAU,CAAAD,QAAA,cACrBpC,IAAA,WACIqC,SAAS,CAAC,WAAW,CACrBC,OAAO,CAAEA,CAAA,GAAMhB,gBAAgB,CAACJ,IAAI,CAAE,CAAAkB,QAAA,CAErCjB,IAAI,CACD,CAAC,EANkBD,IAO1B,CAAC,EACT,CAAC,CACD,CAAC,CACD,CAAC,CACT,CAAC,cAENlB,IAAA,QAAKqC,SAAS,CAAC,gBAAgB,CAAAD,QAAA,cAC3BpC,IAAA,MAAGqC,SAAS,CAAC,WAAW,CAAAD,QAAA,CAAC,kEAEzB,CAAG,CAAC,CACH,CAAC,EACD,CAAC,CAElB,CAAC,CAED,cAAe,CAAAjC,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
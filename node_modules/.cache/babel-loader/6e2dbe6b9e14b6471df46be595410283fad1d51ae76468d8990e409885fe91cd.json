{"ast":null,"code":"import React,{useState}from'react';import Header from'./components/Header';import ZoneSelector from'./components/ZoneSelector';import DepartmentList from'./components/DepartmentList';import'./App.css';import useSession from'./hooks/useSession';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[currentZone,setCurrentZone]=useState(null);const{isSessionActive,isExpired,remainingTime}=useSession();const handleSelectZone=zone=>{setCurrentZone(zone);};const handleGoBack=()=>{setCurrentZone(null);};// üîí Locked state after expiry\nif(isExpired){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"main\",{className:\"page-wrapper\",children:/*#__PURE__*/_jsxs(\"section\",{style:{padding:'40px',textAlign:'center',maxWidth:'600px',margin:'0 auto'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#dc2626'},children:\"Session expired\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please scan the QR code again to continue.\"})]})})]});}// ‚è≥ While waiting for QR scan (initial load without ?qr=1)\nif(!isSessionActive){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"main\",{className:\"page-wrapper\",children:/*#__PURE__*/_jsx(\"section\",{style:{padding:'40px',textAlign:'center'},children:/*#__PURE__*/_jsx(\"p\",{children:\"Please scan the QR code to start.\"})})})]});}// ‚úÖ Normal app flow\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"main\",{className:\"page-wrapper\",children:!currentZone?/*#__PURE__*/_jsx(ZoneSelector,{onSelectZone:handleSelectZone}):/*#__PURE__*/_jsx(DepartmentList,{zone:currentZone,onBack:handleGoBack})}),/*#__PURE__*/_jsxs(\"footer\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"note-text\",children:[\"Navigation through Mappls App\",/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:8,fontSize:12,opacity:0.7},children:[\"(expires in \",Math.ceil(remainingTime/1000),\"s)\"]})]}),\"\\xA9 2025 Ashok Leyland. All rights reserved.\"]})]});}export default App;","map":{"version":3,"names":["React","useState","Header","ZoneSelector","DepartmentList","useSession","jsx","_jsx","jsxs","_jsxs","App","currentZone","setCurrentZone","isSessionActive","isExpired","remainingTime","handleSelectZone","zone","handleGoBack","className","children","style","padding","textAlign","maxWidth","margin","color","onSelectZone","onBack","marginLeft","fontSize","opacity","Math","ceil"],"sources":["D:/navigationAl-main/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport Header from './components/Header';\nimport ZoneSelector from './components/ZoneSelector';\nimport DepartmentList from './components/DepartmentList';\nimport './App.css';\nimport useSession from './hooks/useSession';\n\nfunction App() {\n  const [currentZone, setCurrentZone] = useState(null);\n  const { isSessionActive, isExpired, remainingTime } = useSession();\n\n  const handleSelectZone = (zone) => {\n    setCurrentZone(zone);\n  };\n\n  const handleGoBack = () => {\n    setCurrentZone(null);\n  };\n\n  // üîí Locked state after expiry\n  if (isExpired) {\n    return (\n      <div className=\"App\">\n        <Header />\n        <main className=\"page-wrapper\">\n          <section\n            style={{\n              padding: '40px',\n              textAlign: 'center',\n              maxWidth: '600px',\n              margin: '0 auto'\n            }}\n          >\n            <h2 style={{ color: '#dc2626' }}>Session expired</h2>\n            <p>Please scan the QR code again to continue.</p>\n          </section>\n        </main>\n      </div>\n    );\n  }\n\n  // ‚è≥ While waiting for QR scan (initial load without ?qr=1)\n  if (!isSessionActive) {\n    return (\n      <div className=\"App\">\n        <Header />\n        <main className=\"page-wrapper\">\n          <section\n            style={{\n              padding: '40px',\n              textAlign: 'center'\n            }}\n          >\n            <p>Please scan the QR code to start.</p>\n          </section>\n        </main>\n      </div>\n    );\n  }\n\n  // ‚úÖ Normal app flow\n  return (\n    <div className=\"App\">\n      <Header />\n\n      <main className=\"page-wrapper\">\n        {!currentZone ? (\n          <ZoneSelector onSelectZone={handleSelectZone} />\n        ) : (\n          <DepartmentList\n            zone={currentZone}\n            onBack={handleGoBack}\n          />\n        )}\n      </main>\n\n      <footer>\n        <p className=\"note-text\">\n          Navigation through Mappls App\n          <span style={{ marginLeft: 8, fontSize: 12, opacity: 0.7 }}>\n            (expires in {Math.ceil(remainingTime / 1000)}s)\n          </span>\n        </p>\n        &copy; 2025 Ashok Leyland. All rights reserved.\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,YAAY,KAAM,2BAA2B,CACpD,MAAO,CAAAC,cAAc,KAAM,6BAA6B,CACxD,MAAO,WAAW,CAClB,MAAO,CAAAC,UAAU,KAAM,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5C,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAAEY,eAAe,CAAEC,SAAS,CAAEC,aAAc,CAAC,CAAGV,UAAU,CAAC,CAAC,CAElE,KAAM,CAAAW,gBAAgB,CAAIC,IAAI,EAAK,CACjCL,cAAc,CAACK,IAAI,CAAC,CACtB,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzBN,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAED;AACA,GAAIE,SAAS,CAAE,CACb,mBACEL,KAAA,QAAKU,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBb,IAAA,CAACL,MAAM,GAAE,CAAC,cACVK,IAAA,SAAMY,SAAS,CAAC,cAAc,CAAAC,QAAA,cAC5BX,KAAA,YACEY,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACfC,SAAS,CAAE,QAAQ,CACnBC,QAAQ,CAAE,OAAO,CACjBC,MAAM,CAAE,QACV,CAAE,CAAAL,QAAA,eAEFb,IAAA,OAAIc,KAAK,CAAE,CAAEK,KAAK,CAAE,SAAU,CAAE,CAAAN,QAAA,CAAC,iBAAe,CAAI,CAAC,cACrDb,IAAA,MAAAa,QAAA,CAAG,4CAA0C,CAAG,CAAC,EAC1C,CAAC,CACN,CAAC,EACJ,CAAC,CAEV,CAEA;AACA,GAAI,CAACP,eAAe,CAAE,CACpB,mBACEJ,KAAA,QAAKU,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBb,IAAA,CAACL,MAAM,GAAE,CAAC,cACVK,IAAA,SAAMY,SAAS,CAAC,cAAc,CAAAC,QAAA,cAC5Bb,IAAA,YACEc,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACfC,SAAS,CAAE,QACb,CAAE,CAAAH,QAAA,cAEFb,IAAA,MAAAa,QAAA,CAAG,mCAAiC,CAAG,CAAC,CACjC,CAAC,CACN,CAAC,EACJ,CAAC,CAEV,CAEA;AACA,mBACEX,KAAA,QAAKU,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBb,IAAA,CAACL,MAAM,GAAE,CAAC,cAEVK,IAAA,SAAMY,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC3B,CAACT,WAAW,cACXJ,IAAA,CAACJ,YAAY,EAACwB,YAAY,CAAEX,gBAAiB,CAAE,CAAC,cAEhDT,IAAA,CAACH,cAAc,EACba,IAAI,CAAEN,WAAY,CAClBiB,MAAM,CAAEV,YAAa,CACtB,CACF,CACG,CAAC,cAEPT,KAAA,WAAAW,QAAA,eACEX,KAAA,MAAGU,SAAS,CAAC,WAAW,CAAAC,QAAA,EAAC,+BAEvB,cAAAX,KAAA,SAAMY,KAAK,CAAE,CAAEQ,UAAU,CAAE,CAAC,CAAEC,QAAQ,CAAE,EAAE,CAAEC,OAAO,CAAE,GAAI,CAAE,CAAAX,QAAA,EAAC,cAC9C,CAACY,IAAI,CAACC,IAAI,CAAClB,aAAa,CAAG,IAAI,CAAC,CAAC,IAC/C,EAAM,CAAC,EACN,CAAC,gDAEN,EAAQ,CAAC,EACN,CAAC,CAEV,CAEA,cAAe,CAAAL,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}